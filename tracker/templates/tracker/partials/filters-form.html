{% load widget_tweaks %}

<form hx-get="{% url form_action_url %}"
      hx-target="{{ form_target }}"
      hx-swap="outerHTML"
      id="filterform"
>
    <div class="mb-2 form-control">
        {{ filter.form.transaction_type | add_label_class:"label text-white" }}
        {% render_field filter.form.transaction_type class="select bg-gray-50 text-gray-900" %}
    </div>
     <div class="mb-2 form-control">
        {{ filter.form.start_date | add_label_class:"label text-white" }}
        {% render_field filter.form.start_date class="input bg-gray-50 text-gray-900" %}
    </div>
     <div class="mb-2 form-control">
        {{ filter.form.end_date | add_label_class:"label text-white" }}
        {% render_field filter.form.end_date class="input bg-gray-50 text-gray-900" %}
    </div>
     <div class="mb-2 form-control">
         {{ filter.form.category | add_label_class:"label text-white" }}
        <div class="max-h-48 overflow-y-scroll bg-gray-50 border border-gray-300 rounded-md p-3"
             style="scrollbar-width: thin; scrollbar-color: #9ca3af #e5e7eb;">
            {% render_field filter.form.category class="space-y-2 text-black" %}
        </div>
    </div>
    <div class="flex gap-2">
        <button class="btn btn-success {% if filter.form.transaction_type.value or filter.form.start_date.value or filter.form.end_date.value or filter.form.category.value %}flex-1{% else %}w-full{% endif %}">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z" />
            </svg>
            Filter
        </button>
        {% if filter.form.transaction_type.value or filter.form.start_date.value or filter.form.end_date.value or filter.form.category.value %}
        <a href="{% url clear_action_url %}"
           class="btn btn-ghost"
           hx-get="{% url clear_action_url %}"
           hx-target="{{ form_target }}"
           hx-swap="outerHTML">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
            </svg>
            Clear
        </a>
        {% endif %}
    </div>
</form>